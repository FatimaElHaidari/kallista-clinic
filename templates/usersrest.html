<!DOCTYPE html>
<html lang="en">
<head>
    <head>
      
    </head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/usersrest.css">
    <title>Rest Api </title>
</head>
<body>
    <h1>Users List</h1>
    <div id="users-list"></div>

    <script>
        function fetchUsers() {
            const xhr = new XMLHttpRequest();
            
          
            xhr.open('GET', 'http://127.0.0.1:5000/api/users', true);
            
            xhr.onload = function() {
                if (xhr.status >= 200 && xhr.status < 300) {
                    const users = JSON.parse(xhr.responseText);
                    displayUsers(users);
                } else {
                    console.error('Request failed with status:', xhr.status);
                }
            };
            
            xhr.onerror = function() {
                console.error('Request failed');
            };
            
            xhr.send();
        }

        function displayUsers(users) {

            console.log(users)

            const usersList = document.getElementById('users-list');
            usersList.innerHTML = '';  // Clear existing list
            
            users.forEach(user => {
                const div = document.createElement('div');
                div.classList.add('user');

                const name = document.createElement('h2');
                name.textContent = user.full_name;
                div.appendChild(name);

                const email = document.createElement('p');
                email.textContent = `Email: ${user.email}`;
                div.appendChild(email);

                const phone = document.createElement('p');
                phone.textContent = `Phone: ${user.phone_number}`;
                div.appendChild(phone);

                const dob = document.createElement('p');
                dob.textContent = `Date of Birth: ${new Date(user.date_of_birth).toLocaleDateString()}`;
                div.appendChild(dob);

                const address = document.createElement('p');
                address.textContent = `Address: ${user.address}`;
                div.appendChild(address);

                const role = document.createElement('p');
                role.textContent = `Role: ${user.role}`;
                div.appendChild(role);

                usersList.appendChild(div);
            });
        }
                
                
                                

                
        
       
        window.onload = fetchUsers;
    </script>
   </body>
</html>